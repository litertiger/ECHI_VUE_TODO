{"version":3,"sources":["webpack:///./src/views/TodoDetail/index.module.less?21b7","webpack:///./src/api/todo.ts","webpack:///./node_modules/core-js/modules/es.array.find.js","webpack:///./src/views/TodoDetail/index.jsx"],"names":["module","exports","ApiSaveTodoList","data","post","ApiGetTodoList","get","ApiGetTodoDetail","id","ApiGetTodoListByDay","day","ApiGetReviewTodoList","ApiGetFinishedTodoList","ApiGetRecycleTodoList","ApiDeleteTodo","delete","ApiDeleteTodoToRecycle","ApiRestoreTodoFromRecycle","put","$","$find","find","addToUnscopables","arrayMethodUsesToLength","FIND","SKIPS_HOLES","USES_TO_LENGTH","Array","target","proto","forced","callbackfn","this","arguments","length","undefined","name","statusVisible","statusData","statusOptions","key","color","currentDate","Date","visibleDate","todoData","title","description","date","priority","methods","getTodoDetail","loading","resp","code","result","item","handleToggleCheck","isFinished","handleOpenDate","handleCloseDate","handleConfirmDate","value","console","log","$moment","handleOpenStatus","handleCloseStatus","handleSelectStatus","handleSave","$toast","success","setTimeout","$router","replace","mounted","$route","query","render","$data","classNames","styles","todoDetail","saveBtn","todoDetailContent","todoDetailHeader","todoDetailHeaderItem","todoDetailClaim","icon","calendar","sameElse","todoDetailTitle","finished","todoDetailCheck","todoDetailInput","paddingLeft","textarea"],"mappings":"+FACAA,EAAOC,QAAU,CAAC,WAAa,gCAAgC,QAAU,6BAA6B,kBAAoB,uCAAuC,iBAAmB,sCAAsC,qBAAuB,0CAA0C,gBAAkB,qCAAqC,SAAW,8BAA8B,gBAAkB,qCAAqC,KAAO,0BAA0B,gBAAkB,qCAAqC,SAAW,8BAA8B,gBAAkB,uC,oCCDrkB,oWAWM,SAAUC,EAAgBC,GAC9B,OAAO,OAAQC,KAAK,yBAA0BD,GAS1C,SAAUE,EAAeF,GAC7B,OAAO,OAAQG,IAAI,wBAAyBH,GAOxC,SAAUI,EAAiBC,GAC/B,OAAO,OAAQF,IAAI,0BAA2B,CAC5CE,OAQE,SAAUC,EAAoBC,GAClC,OAAO,OAAQJ,IAAI,6BAA8B,CAC/CI,QAOE,SAAUC,IACd,OAAO,OAAQL,IAAI,+BASf,SAAUM,EAAuBT,GACrC,OAAO,OAAQG,IAAI,gCAAiCH,GAShD,SAAUU,EAAsBV,GACpC,OAAO,OAAQG,IAAI,+BAAgCH,GAO/C,SAAUW,EAAcN,GAC5B,OAAO,OAAQO,OAAO,uBAAwBP,GAO1C,SAAUQ,EAAuBR,GACrC,OAAO,OAAQO,OAAO,gCAAiCP,GAOnD,SAAUS,EAA0BT,GACxC,OAAO,OAAQU,IAAI,gCAAiCV,K,oCC5FtD,IAAIW,EAAI,EAAQ,QACZC,EAAQ,EAAQ,QAAgCC,KAChDC,EAAmB,EAAQ,QAC3BC,EAA0B,EAAQ,QAElCC,EAAO,OACPC,GAAc,EAEdC,EAAiBH,EAAwBC,GAGzCA,IAAQ,IAAIG,MAAM,GAAGH,IAAM,WAAcC,GAAc,KAI3DN,EAAE,CAAES,OAAQ,QAASC,OAAO,EAAMC,OAAQL,IAAgBC,GAAkB,CAC1EL,KAAM,SAAcU,GAClB,OAAOX,EAAMY,KAAMD,EAAYE,UAAUC,OAAS,EAAID,UAAU,QAAKE,MAKzEb,EAAiBE,I,mMCnBF,cACbY,KAAM,aACNjC,KAFa,WAGX,MAAO,CACLK,GAAI,KACJ6B,eAAe,EACfC,WAAY,GACZC,cAAe,CACb,CACEH,KAAM,OACNI,IAAK,EACLC,MAAO,WAET,CACEL,KAAM,OACNI,IAAK,EACLC,MAAO,WAET,CACEL,KAAM,OACNI,IAAK,EACLC,MAAO,WAET,CACEL,KAAM,QACNI,IAAK,EACLC,MAAO,YAGXC,YAAa,IAAIC,KACjBC,aAAa,EACbC,SAAU,GACVC,MAAO,GACPC,YAAa,GACbC,MAAO,IAAIL,KACXM,SAAU,OAGdC,QAAS,CACDC,cADC,SACa3C,GAAI,mKACjBA,EADiB,wDAItB,EAAK4C,SAAU,EAJO,SAKH7C,eAAiBC,GALd,OAKhB6C,EALgB,OAMtB,EAAKD,SAAU,EACG,IAAdC,EAAKC,OACDnD,EAAOkD,EAAKE,OAClB,EAAKV,SAAW1C,EAChB,EAAK2C,MAAQ3C,EAAK2C,MAClB,EAAKC,YAAc5C,EAAK4C,YACxB,EAAKC,KAAO7C,EAAK6C,KACjB,EAAKC,SAAW9C,EAAK8C,SACrB,EAAKX,WACH,EAAKC,cAAclB,MAAK,SAAAmC,GAAI,OAAIA,EAAKhB,MAAQrC,EAAK8C,aAAa,IAf7C,8CAkBxBQ,kBAnBO,SAmBWD,GAChBA,EAAKE,YAAcF,EAAKE,YAE1BC,eAtBO,WAuBL3B,KAAKY,aAAc,GAErBgB,gBAzBO,WA0BL5B,KAAKY,aAAc,GAErBiB,kBA5BO,SA4BWC,GAChBC,QAAQC,IAAIF,GACZ9B,KAAKgB,KAAOhB,KAAKiC,QAAQH,GACzB9B,KAAK4B,mBAEPM,iBAjCO,WAkCLlC,KAAKK,eAAgB,GAEvB8B,kBApCO,WAqCLnC,KAAKK,eAAgB,GAEvB+B,mBAvCO,SAuCYN,GACjB9B,KAAKM,WAAawB,EAClB9B,KAAKiB,SAAWa,EAAMtB,IACtBR,KAAKmC,qBAEDE,WA5CC,WA4CY,mKACZ,EAAKvB,MADO,uBAEf,EAAKwB,OAAO,UAFG,iCAMXnE,EAAO,CACX2C,MAAO,EAAKA,MACZC,YAAa,EAAKA,YAClBC,KAAM,EAAKA,KACXC,SAAU,EAAKA,UAGb,EAAKzC,KACPL,EAAK,MAAQ,EAAKK,IAEpBuD,QAAQC,IAAI7D,GAhBK,SAiBED,eAAgBC,GAjBlB,OAiBXkD,EAjBW,OAkBC,IAAdA,EAAKC,OACP,EAAKgB,OAAOC,QAAQ,QACpBC,YAAW,WACT,EAAKC,QAAQC,QAAQ,CACnBtC,KAAM,WAEP,OAxBY,gDA4BrBuC,QA9Ga,WA8GH,IACAnE,EAAOwB,KAAK4C,OAAOC,MAAnBrE,GACRwB,KAAKxB,GAAKA,EACVwB,KAAKmB,cAAc3C,IAErBsE,OAnHa,WAmHJ,4BAYH9C,KAAK+C,MAVP1C,EAFK,EAELA,cACAC,EAHK,EAGLA,WACAC,EAJK,EAILA,cACAG,EALK,EAKLA,YACAE,EANK,EAMLA,YACAC,EAPK,EAOLA,SACArC,EARK,EAQLA,GACAsC,EATK,EASLA,MACAC,EAVK,EAULA,YACAC,EAXK,EAWLA,KAGF,6BACqBgC,IAAWC,IAAOC,aADvC,gEAMe,QANf,MAOiBD,IAAOE,QAPxB,UAQmBnD,KAAKqC,aARxB,wCAekBY,IAAOG,mBAfzB,gBAgBoBH,IAAOI,kBAhB3B,gBAkBmBJ,IAAOK,qBAlB1B,UAmBqBtD,KAAKkC,mBAnB1B,iBAsBqB,CACLzB,MAAOH,EAAWG,QAvBlC,CA0BeH,EAAWF,MAAQ,UA1BlC,eA6BsB6C,IAAOK,sBA7B7B,gBA+BqBL,IAAOM,gBA/B5B,UAgCuBvD,KAAK2B,iBAhC5B,cAkCwBqB,IAAW,WAAYC,IAAOO,OAlCtD,iBAoCiBxD,KAAKiC,QAAQjB,GAAMyC,SAAS,KAAM,CACjCC,SAAU,wBArC5B,gCA6CiBV,IAAWC,IAAOU,gBAAR,kBACdV,IAAOW,SAAW/C,EAASa,cA9CxC,CAiDWlD,GAAM,EAAJ,cAEQyE,IAAOY,gBAFf,UAGU,kBAAM,EAAKpC,kBAAkBZ,MAHvC,cAMUmC,IAAW,WAAYC,IAAOO,MANxC,oBAQK3C,EAASa,WAAa,WAAa,gBAzDrD,qBA+DmBsB,IAAWC,IAAOa,iBA/DrC,aAgEmBhD,EAhEnB,YAkEwB,MAlExB,UAiEqB,SAAAgB,GAAK,OAAK,EAAKiB,MAAMjC,MAAQgB,IAjElD,MAmEmB,CACLiC,YAAavF,EAAK,GAAK,OApErC,qBAyEiBwE,IAAWC,IAAOa,gBAAiBb,IAAOe,UAzE3D,aA0EiBjD,EA1EjB,eA4EyB,EA5EzB,UA6EoB,MA7EpB,KA8Ee,WA9Ef,KA+Ee,KA/Ef,wBAiFsB,UAjFtB,UA2EmB,SAAAe,GAAK,OAAK,EAAKiB,MAAMhC,YAAce,UA3EtD,mCAsFazB,EAtFb,QAwFeE,EAxFf,OAyFa,GAzFb,UAuFeP,KAAKmC,kBAvFpB,OA0FgBnC,KAAKoC,sBA1FrB,4BA6FaxB,EA7Fb,SA+Fe,UA/Ff,UA8FeZ,KAAK4B,kBA9FpB,qCAkGkB5B,KAAK4B,gBAlGvB,QAmGmB5B,KAAK6B,mBAnGxB,aAoGenB,EApGf,KAqGa,WArGb,MAsGc","file":"js/TodoDetail.c06b087a.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"todoDetail\":\"index-module_todoDetail_3Pv6Z\",\"saveBtn\":\"index-module_saveBtn_3uifg\",\"todoDetailContent\":\"index-module_todoDetailContent_19ElI\",\"todoDetailHeader\":\"index-module_todoDetailHeader_3T4SK\",\"todoDetailHeaderItem\":\"index-module_todoDetailHeaderItem_1A7qb\",\"todoDetailTitle\":\"index-module_todoDetailTitle_3Dkca\",\"finished\":\"index-module_finished_2LOol\",\"todoDetailCheck\":\"index-module_todoDetailCheck_2_5WC\",\"icon\":\"index-module_icon_1M2mh\",\"todoDetailInput\":\"index-module_todoDetailInput_QFrdb\",\"textarea\":\"index-module_textarea_3LyXP\",\"todoDetailClaim\":\"index-module_todoDetailClaim_2X9ky\"};","import service from \"@/axios/service\";\r\n\r\n/**\r\n * 新增/编辑待办\r\n * @param {Object} data\r\n * @param {Number} data.id\r\n * @param {Number} data.title\r\n * @param {String} data.description\r\n * @param {timestamp} data.date\r\n * @param {Number} data.priority\r\n */\r\nexport function ApiSaveTodoList(data) {\r\n  return service.post(\"/api/todo/saveTodoList\", data);\r\n}\r\n\r\n/**\r\n * 获取待办列表\r\n * @param {Object} data\r\n * @param {Number} data.page\r\n * @param {Number} data.pageSize\r\n */\r\nexport function ApiGetTodoList(data) {\r\n  return service.get(\"/api/todo/getTodoList\", data);\r\n}\r\n\r\n/**\r\n * 获取待办详情\r\n * @param {String} id\r\n */\r\nexport function ApiGetTodoDetail(id) {\r\n  return service.get(\"/api/todo/getTodoDetail\", {\r\n    id\r\n  });\r\n}\r\n\r\n/**\r\n * 根据日期获取待办数据\r\n * @param {timestamp} day\r\n */\r\nexport function ApiGetTodoListByDay(day) {\r\n  return service.get(\"/api/todo/getTodoListByDay\", {\r\n    day\r\n  });\r\n}\r\n\r\n/**\r\n * 获取本周事件回顾\r\n */\r\nexport function ApiGetReviewTodoList() {\r\n  return service.get(\"/api/todo/getReviewTodoList\");\r\n}\r\n\r\n/**\r\n * 获取已完成待办列表\r\n * @param {Object} data\r\n * @param {Number} data.page\r\n * @param {Number} data.pageSize\r\n */\r\nexport function ApiGetFinishedTodoList(data) {\r\n  return service.get(\"/api/todo/getFinishedTodoList\", data);\r\n}\r\n\r\n/**\r\n * 获取回收站待办列表\r\n * @param {Object} data\r\n * @param {Number} data.page\r\n * @param {Number} data.pageSize\r\n */\r\nexport function ApiGetRecycleTodoList(data) {\r\n  return service.get(\"/api/todo/getRecycleTodoList\", data);\r\n}\r\n\r\n/**\r\n * 删除待办\r\n * @param {String} id\r\n */\r\nexport function ApiDeleteTodo(id) {\r\n  return service.delete(\"/api/todo/deleteTodo\", id);\r\n}\r\n\r\n/**\r\n * 删除待办-回收站\r\n * @param {String} id\r\n */\r\nexport function ApiDeleteTodoToRecycle(id) {\r\n  return service.delete(\"/api/todo/deleteTodoToRecycle\", id);\r\n}\r\n\r\n/**\r\n * 还原待办-回收站\r\n * @param {String} id\r\n */\r\nexport function ApiRestoreTodoFromRecycle(id) {\r\n  return service.put(\"/api/todo/rebackTodoToRecycle\", id);\r\n}\r\n","'use strict';\nvar $ = require('../internals/export');\nvar $find = require('../internals/array-iteration').find;\nvar addToUnscopables = require('../internals/add-to-unscopables');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar FIND = 'find';\nvar SKIPS_HOLES = true;\n\nvar USES_TO_LENGTH = arrayMethodUsesToLength(FIND);\n\n// Shouldn't skip holes\nif (FIND in []) Array(1)[FIND](function () { SKIPS_HOLES = false; });\n\n// `Array.prototype.find` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.find\n$({ target: 'Array', proto: true, forced: SKIPS_HOLES || !USES_TO_LENGTH }, {\n  find: function find(callbackfn /* , that = undefined */) {\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.github.io/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables(FIND);\n","import styles from \"./index.module.less\";\r\nimport classNames from \"classnames\";\r\nimport { ApiGetTodoDetail, ApiSaveTodoList } from \"@/api/todo\";\r\n\r\nexport default {\r\n  name: \"TodoDetail\",\r\n  data() {\r\n    return {\r\n      id: null,\r\n      statusVisible: false,\r\n      statusData: {},\r\n      statusOptions: [\r\n        {\r\n          name: \"低优先级\",\r\n          key: 1,\r\n          color: \"#1890ff\"\r\n        },\r\n        {\r\n          name: \"中优先级\",\r\n          key: 2,\r\n          color: \"#52c41a\"\r\n        },\r\n        {\r\n          name: \"高优先级\",\r\n          key: 3,\r\n          color: \"#faad14\"\r\n        },\r\n        {\r\n          name: \"最高优先级\",\r\n          key: 4,\r\n          color: \"#f5222d\"\r\n        }\r\n      ],\r\n      currentDate: new Date(),\r\n      visibleDate: false,\r\n      todoData: {},\r\n      title: \"\",\r\n      description: \"\",\r\n      date: +new Date(),\r\n      priority: null\r\n    };\r\n  },\r\n  methods: {\r\n    async getTodoDetail(id) {\r\n      if (!id) {\r\n        return;\r\n      }\r\n      this.loading = true;\r\n      const resp = await ApiGetTodoDetail(id);\r\n      this.loading = false;\r\n      if (resp.code === 0) {\r\n        const data = resp.result;\r\n        this.todoData = data;\r\n        this.title = data.title;\r\n        this.description = data.description;\r\n        this.date = data.date;\r\n        this.priority = data.priority;\r\n        this.statusData =\r\n          this.statusOptions.find(item => item.key === data.priority) || {};\r\n      }\r\n    },\r\n    handleToggleCheck(item) {\r\n      item.isFinished = !item.isFinished;\r\n    },\r\n    handleOpenDate() {\r\n      this.visibleDate = true;\r\n    },\r\n    handleCloseDate() {\r\n      this.visibleDate = false;\r\n    },\r\n    handleConfirmDate(value) {\r\n      console.log(value);\r\n      this.date = this.$moment(value);\r\n      this.handleCloseDate();\r\n    },\r\n    handleOpenStatus() {\r\n      this.statusVisible = true;\r\n    },\r\n    handleCloseStatus() {\r\n      this.statusVisible = false;\r\n    },\r\n    handleSelectStatus(value) {\r\n      this.statusData = value;\r\n      this.priority = value.key;\r\n      this.handleCloseStatus();\r\n    },\r\n    async handleSave() {\r\n      if (!this.title) {\r\n        this.$toast(\"请填写标题~\");\r\n        return;\r\n      }\r\n\r\n      const data = {\r\n        title: this.title,\r\n        description: this.description,\r\n        date: this.date,\r\n        priority: this.priority\r\n      };\r\n\r\n      if (this.id) {\r\n        data[\"id\"] = this.id;\r\n      }\r\n      console.log(data);\r\n      const resp = await ApiSaveTodoList(data);\r\n      if (resp.code === 0) {\r\n        this.$toast.success(\"提交成功\");\r\n        setTimeout(() => {\r\n          this.$router.replace({\r\n            name: \"Todo\"\r\n          });\r\n        }, 1500);\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    const { id } = this.$route.query;\r\n    this.id = id;\r\n    this.getTodoDetail(id);\r\n  },\r\n  render() {\r\n    const {\r\n      statusVisible,\r\n      statusData,\r\n      statusOptions,\r\n      currentDate,\r\n      visibleDate,\r\n      todoData,\r\n      id,\r\n      title,\r\n      description,\r\n      date\r\n    } = this.$data;\r\n\r\n    return (\r\n      <EContainer class={classNames(styles.todoDetail)}>\r\n        <EHeader\r\n          extra={\r\n            <van-button\r\n              plain\r\n              type=\"info\"\r\n              class={styles.saveBtn}\r\n              onClick={this.handleSave}\r\n            >\r\n              保存\r\n            </van-button>\r\n          }\r\n        />\r\n        <EContent>\r\n          <div class={styles.todoDetailContent}>\r\n            <div class={styles.todoDetailHeader}>\r\n              <div\r\n                class={styles.todoDetailHeaderItem}\r\n                onClick={this.handleOpenStatus}\r\n              >\r\n                <span\r\n                  style={{\r\n                    color: statusData.color\r\n                  }}\r\n                >\r\n                  {statusData.name || \"优先级\"}\r\n                </span>\r\n              </div>\r\n              <div class={styles.todoDetailHeaderItem}>\r\n                <div\r\n                  class={styles.todoDetailClaim}\r\n                  onClick={this.handleOpenDate}\r\n                >\r\n                  <i class={classNames(\"iconfont\", styles.icon)}>&#xe668;</i>\r\n                  <span>\r\n                    {this.$moment(date).calendar(null, {\r\n                      sameElse: \"MM-DD HH:mm\"\r\n                    })}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <van-divider />\r\n            <div\r\n              class={classNames(styles.todoDetailTitle, {\r\n                [styles.finished]: todoData.isFinished\r\n              })}\r\n            >\r\n              {id && (\r\n                <span\r\n                  class={styles.todoDetailCheck}\r\n                  onClick={() => this.handleToggleCheck(todoData)}\r\n                >\r\n                  <i\r\n                    class={classNames(\"iconfont\", styles.icon)}\r\n                    domPropsInnerHTML={\r\n                      todoData.isFinished ? \"&#xe606;\" : \"&#xe6ca;\"\r\n                    }\r\n                  ></i>\r\n                </span>\r\n              )}\r\n              <van-field\r\n                class={classNames(styles.todoDetailInput)}\r\n                value={title}\r\n                onInput={value => (this.$data.title = value)}\r\n                placeholder=\"标题\"\r\n                style={{\r\n                  paddingLeft: id ? \"\" : 0\r\n                }}\r\n              />\r\n            </div>\r\n            <van-field\r\n              class={classNames(styles.todoDetailInput, styles.textarea)}\r\n              value={description}\r\n              onInput={value => (this.$data.description = value)}\r\n              showWordLimit={true}\r\n              maxlength=\"200\"\r\n              type=\"textarea\"\r\n              rows=\"10\"\r\n              autosize\r\n              placeholder=\"记录你的美好\"\r\n            />\r\n          </div>\r\n        </EContent>\r\n        <van-action-sheet\r\n          value={statusVisible}\r\n          onInput={this.handleCloseStatus}\r\n          actions={statusOptions}\r\n          round={false}\r\n          onSelect={this.handleSelectStatus}\r\n        />\r\n        <van-popup\r\n          value={visibleDate}\r\n          onInput={this.handleCloseDate}\r\n          position=\"bottom\"\r\n        >\r\n          <van-datetime-picker\r\n            onCancel={this.handleCloseDate}\r\n            onConfirm={this.handleConfirmDate}\r\n            value={currentDate}\r\n            type=\"datetime\"\r\n            title=\"选择完整时间\"\r\n          />\r\n        </van-popup>\r\n      </EContainer>\r\n    );\r\n  }\r\n};\r\n"],"sourceRoot":""}