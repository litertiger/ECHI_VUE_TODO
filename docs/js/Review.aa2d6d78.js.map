{"version":3,"sources":["webpack:///./src/api/todo.ts","webpack:///./src/views/Review/index.jsx","webpack:///./src/views/Review/index.module.less?826c"],"names":["ApiSaveTodoList","data","post","ApiGetTodoList","get","ApiGetTodoDetail","id","ApiGetTodoListByDay","day","ApiGetReviewTodoList","ApiGetFinishedTodoList","ApiGetRecycleTodoList","ApiDeleteTodo","delete","ApiDeleteTodoToRecycle","ApiRestoreTodoFromRecycle","put","name","todoList","loading","visible","todoDetail","taskData","computed","ratioText","rate","this","methods","getReviewTodoList","resp","code","result","task","list","handleCheck","item","isFinished","filter","todo","push","unshift","handleGoDetail","$router","params","handleUpdate","handleDelete","$toast","success","mounted","render","$data","$route","meta","title","styles","reviewHeader","rateBox","reviewBox","reviewBoxItem","finishCount","module","exports"],"mappings":"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","file":"js/Review.aa2d6d78.js","sourcesContent":["import service from \"@/axios/service\";\r\n\r\n/**\r\n * 新增/编辑待办\r\n * @param {Object} data\r\n * @param {Number} data.id\r\n * @param {Number} data.title\r\n * @param {String} data.description\r\n * @param {timestamp} data.date\r\n * @param {Number} data.priority\r\n */\r\nexport function ApiSaveTodoList(data) {\r\n  return service.post(\"/api/todo/saveTodoList\", data);\r\n}\r\n\r\n/**\r\n * 获取待办列表\r\n * @param {Object} data\r\n * @param {Number} data.page\r\n * @param {Number} data.pageSize\r\n */\r\nexport function ApiGetTodoList(data) {\r\n  return service.get(\"/api/todo/getTodoList\", data);\r\n}\r\n\r\n/**\r\n * 获取待办详情\r\n * @param {String} id\r\n */\r\nexport function ApiGetTodoDetail(id) {\r\n  return service.get(\"/api/todo/getTodoDetail\", {\r\n    id\r\n  });\r\n}\r\n\r\n/**\r\n * 根据日期获取待办数据\r\n * @param {timestamp} day\r\n */\r\nexport function ApiGetTodoListByDay(day) {\r\n  return service.get(\"/api/todo/getTodoListByDay\", {\r\n    day\r\n  });\r\n}\r\n\r\n/**\r\n * 获取本周事件回顾\r\n */\r\nexport function ApiGetReviewTodoList() {\r\n  return service.get(\"/api/todo/getReviewTodoList\");\r\n}\r\n\r\n/**\r\n * 获取已完成待办列表\r\n * @param {Object} data\r\n * @param {Number} data.page\r\n * @param {Number} data.pageSize\r\n */\r\nexport function ApiGetFinishedTodoList(data) {\r\n  return service.get(\"/api/todo/getFinishedTodoList\", data);\r\n}\r\n\r\n/**\r\n * 获取回收站待办列表\r\n * @param {Object} data\r\n * @param {Number} data.page\r\n * @param {Number} data.pageSize\r\n */\r\nexport function ApiGetRecycleTodoList(data) {\r\n  return service.get(\"/api/todo/getRecycleTodoList\", data);\r\n}\r\n\r\n/**\r\n * 删除待办\r\n * @param {String} id\r\n */\r\nexport function ApiDeleteTodo(id) {\r\n  return service.delete(\"/api/todo/deleteTodo\", id);\r\n}\r\n\r\n/**\r\n * 删除待办-回收站\r\n * @param {String} id\r\n */\r\nexport function ApiDeleteTodoToRecycle(id) {\r\n  return service.delete(\"/api/todo/deleteTodoToRecycle\", id);\r\n}\r\n\r\n/**\r\n * 还原待办-回收站\r\n * @param {String} id\r\n */\r\nexport function ApiRestoreTodoFromRecycle(id) {\r\n  return service.put(\"/api/todo/rebackTodoToRecycle\", id);\r\n}\r\n","import styles from \"./index.module.less\";\r\nimport { ApiGetReviewTodoList, ApiDeleteTodoToRecycle } from \"@/api/todo\";\r\n\r\nexport default {\r\n  name: \"Review\",\r\n  data() {\r\n    return {\r\n      todoList: [],\r\n      loading: false,\r\n      visible: false,\r\n      todoDetail: {},\r\n      taskData: {}\r\n    };\r\n  },\r\n  computed: {\r\n    ratioText() {\r\n      const { rate } = this.taskData;\r\n      if (rate <= 3) {\r\n        return \"低\";\r\n      } else if (rate <= 4) {\r\n        return \"中\";\r\n      }\r\n      return \"高\";\r\n    }\r\n  },\r\n  methods: {\r\n    async getReviewTodoList() {\r\n      this.loading = true;\r\n      const resp = await ApiGetReviewTodoList();\r\n      this.loading = false;\r\n      if (resp.code === 0) {\r\n        this.taskData = resp.result.task;\r\n        this.todoList = resp.result.list;\r\n      }\r\n    },\r\n    handleCheck(item) {\r\n      const { id, isFinished } = item;\r\n      this.todoList = this.todoList.filter(todo => todo.id !== id);\r\n      if (isFinished) {\r\n        this.todoList.push(item);\r\n      } else {\r\n        this.todoList.unshift(item);\r\n      }\r\n    },\r\n    handleGoDetail(item) {\r\n      this.$router.push({\r\n        name: \"TodoDetailView\",\r\n        params: {\r\n          id: item.id\r\n        }\r\n      });\r\n    },\r\n    handleUpdate({ visible }) {\r\n      this.visible = visible;\r\n    },\r\n    async handleDelete(item) {\r\n      const { id } = item;\r\n      const resp = await ApiDeleteTodoToRecycle(id);\r\n      if (resp.code === 0) {\r\n        this.$toast.success(\"删除成功\");\r\n        this.todoList = this.todoList.filter(todo => todo.id !== id);\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    this.getReviewTodoList();\r\n  },\r\n  render() {\r\n    const { todoList, taskData, loading } = this.$data;\r\n\r\n    return (\r\n      <EContainer>\r\n        <EHeader title={this.$route.meta.title} type=\"menu\" />\r\n        <EAside />\r\n        <EContent>\r\n          <div class={styles.reviewHeader}>\r\n            <div class={styles.rateBox}>\r\n              <van-rate\r\n                value={taskData.rate}\r\n                color=\"#f5222d\"\r\n                allowHalf={true}\r\n              />\r\n            </div>\r\n            <div class={styles.reviewBox}>\r\n              <div class={styles.reviewBoxItem}>\r\n                本周完成：<span>{taskData.finishCount}</span>\r\n              </div>\r\n              <div class={styles.reviewBoxItem}>\r\n                本周评分：{taskData.rate && <span>{taskData.rate}星</span>}\r\n              </div>\r\n              <div class={styles.reviewBoxItem}>\r\n                本周效率：{taskData.rate && <span>{this.ratioText}</span>}\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <van-divider class=\"divider\">完成任务</van-divider>\r\n          <ETodoCard\r\n            loading={loading}\r\n            todoList={todoList}\r\n            onCheck={this.handleCheck}\r\n            onGoDetail={this.handleGoDetail}\r\n            onDel={this.handleDelete}\r\n          />\r\n        </EContent>\r\n        <EFooter />\r\n      </EContainer>\r\n    );\r\n  }\r\n};\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"reviewHeader\":\"index-module_reviewHeader_25gEp\",\"rateBox\":\"index-module_rateBox_2uZ9w\",\"reviewBox\":\"index-module_reviewBox_274Xm\",\"reviewBoxItem\":\"index-module_reviewBoxItem_3bw-x\"};"],"sourceRoot":""}