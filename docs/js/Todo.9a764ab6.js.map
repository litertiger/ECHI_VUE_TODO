{"version":3,"sources":["webpack:///./src/api/todo.ts","webpack:///./src/views/Todo/index.module.less?e751","webpack:///./src/views/Todo/index.jsx"],"names":["ApiSaveTodoList","data","post","ApiGetTodoList","get","ApiGetTodoDetail","id","ApiGetTodoListByDay","day","ApiGetReviewTodoList","ApiGetFinishedTodoList","ApiGetRecycleTodoList","ApiDeleteTodo","delete","ApiDeleteTodoToRecycle","ApiRestoreTodoFromRecycle","put","module","exports","Vue","extend","name","currentPage","pageSize","total","todoList","loading","methods","getTodoList","page","resp","code","result","list","pagination","handleCheck","item","isFinished","this","filter","todo","push","unshift","handleGoDetail","$router","query","handleDelete","$toast","success","mounted","render","$data","$route","meta","title","styles","addBtn"],"mappings":"wGAAA,oWAWM,SAAUA,EAAgBC,GAC9B,OAAO,OAAQC,KAAK,yBAA0BD,GAS1C,SAAUE,EAAeF,GAC7B,OAAO,OAAQG,IAAI,wBAAyBH,GAOxC,SAAUI,EAAiBC,GAC/B,OAAO,OAAQF,IAAI,0BAA2B,CAC5CE,OAQE,SAAUC,EAAoBC,GAClC,OAAO,OAAQJ,IAAI,6BAA8B,CAC/CI,QAOE,SAAUC,IACd,OAAO,OAAQL,IAAI,+BASf,SAAUM,EAAuBT,GACrC,OAAO,OAAQG,IAAI,gCAAiCH,GAShD,SAAUU,EAAsBV,GACpC,OAAO,OAAQG,IAAI,+BAAgCH,GAO/C,SAAUW,EAAcN,GAC5B,OAAO,OAAQO,OAAO,uBAAwBP,GAO1C,SAAUQ,EAAuBR,GACrC,OAAO,OAAQO,OAAO,gCAAiCP,GAOnD,SAAUS,EAA0BT,GACxC,OAAO,OAAQU,IAAI,gCAAiCV,K,qBC5FtDW,EAAOC,QAAU,CAAC,OAAS,8B,0HCGZC,oBAAIC,OAAO,CACxBC,KAAM,OACNpB,KAFwB,WAGtB,MAAO,CACLqB,YAAa,EACbC,SAAU,GACVC,MAAO,EACPC,SAAU,GACVC,SAAS,IAGbC,QAAS,CACDC,YADC,WACoC,2LAAzBC,EAAyB,+BAAlB,EAAGN,EAAe,+BAAJ,IACjC,EAAKG,QADgC,wDAEzC,EAAKA,SAAU,EACf,EAAKJ,YAAcO,EACnB,EAAKN,SAAWA,EACVtB,EAAO,CACX4B,OACAN,YAPuC,UAStBpB,eAAeF,GATO,QASnC6B,EATmC,OAUzC,EAAKJ,SAAU,EACG,IAAdI,EAAKC,OAAY,EACUD,EAAKE,OAA1BC,EADW,EACXA,KAAMC,EADK,EACLA,WACNV,EAAUU,EAAVV,MACR,EAAKC,SAAWQ,EAChB,EAAKT,MAAQA,GAf0B,+CAkB3CW,YAnBO,SAmBKC,GAAM,IACR9B,EAAmB8B,EAAnB9B,GAAI+B,EAAeD,EAAfC,WACZC,KAAKb,SAAWa,KAAKb,SAASc,QAAO,SAAAC,GAAI,OAAIA,EAAKlC,KAAOA,KACrD+B,EACFC,KAAKb,SAASgB,KAAKL,GAEnBE,KAAKb,SAASiB,QAAQN,IAG1BO,eA5BO,SA4BQP,GACbE,KAAKM,QAAQH,KAAK,CAChBpB,KAAM,aACNwB,MAAO,CACLvC,GAAI8B,EAAK9B,OAITwC,aApCC,SAoCYV,GAAM,uKACf9B,EAAO8B,EAAP9B,GADe,SAEJQ,eAAuBR,GAFnB,OAEjBwB,EAFiB,OAGL,IAAdA,EAAKC,OACP,EAAKgB,OAAOC,QAAQ,QACpB,EAAKvB,SAAW,EAAKA,SAASc,QAAO,SAAAC,GAAI,OAAIA,EAAKlC,KAAOA,MALpC,+CAS3B2C,QAxDwB,WAyDtBX,KAAKV,eAEPsB,OA3DwB,WA2Df,qBACuBZ,KAAKa,MAA3B1B,EADD,EACCA,SAAUC,EADX,EACWA,QAElB,iDAGaY,KAAKc,OAAOC,KAAKC,MAH9B,KAIW,OAJX,iCAOc,CACFjC,KAAM,gBARlB,sCAWiC,QAXjC,MAW+CkC,IAAOC,QAXtD,qEAoBiB9B,EApBjB,SAqBkBD,GArBlB,UAsBiBa,KAAKH,YAtBtB,SAuBoBG,KAAKK,eAvBzB,IAwBeL,KAAKQ,kBAxBpB","file":"js/Todo.9a764ab6.js","sourcesContent":["import service from \"@/axios/service\";\r\n\r\n/**\r\n * 新增/编辑待办\r\n * @param {Object} data\r\n * @param {Number} data.id\r\n * @param {Number} data.title\r\n * @param {String} data.description\r\n * @param {timestamp} data.date\r\n * @param {Number} data.priority\r\n */\r\nexport function ApiSaveTodoList(data) {\r\n  return service.post(\"/api/todo/saveTodoList\", data);\r\n}\r\n\r\n/**\r\n * 获取待办列表\r\n * @param {Object} data\r\n * @param {Number} data.page\r\n * @param {Number} data.pageSize\r\n */\r\nexport function ApiGetTodoList(data) {\r\n  return service.get(\"/api/todo/getTodoList\", data);\r\n}\r\n\r\n/**\r\n * 获取待办详情\r\n * @param {String} id\r\n */\r\nexport function ApiGetTodoDetail(id) {\r\n  return service.get(\"/api/todo/getTodoDetail\", {\r\n    id\r\n  });\r\n}\r\n\r\n/**\r\n * 根据日期获取待办数据\r\n * @param {timestamp} day\r\n */\r\nexport function ApiGetTodoListByDay(day) {\r\n  return service.get(\"/api/todo/getTodoListByDay\", {\r\n    day\r\n  });\r\n}\r\n\r\n/**\r\n * 获取本周事件回顾\r\n */\r\nexport function ApiGetReviewTodoList() {\r\n  return service.get(\"/api/todo/getReviewTodoList\");\r\n}\r\n\r\n/**\r\n * 获取已完成待办列表\r\n * @param {Object} data\r\n * @param {Number} data.page\r\n * @param {Number} data.pageSize\r\n */\r\nexport function ApiGetFinishedTodoList(data) {\r\n  return service.get(\"/api/todo/getFinishedTodoList\", data);\r\n}\r\n\r\n/**\r\n * 获取回收站待办列表\r\n * @param {Object} data\r\n * @param {Number} data.page\r\n * @param {Number} data.pageSize\r\n */\r\nexport function ApiGetRecycleTodoList(data) {\r\n  return service.get(\"/api/todo/getRecycleTodoList\", data);\r\n}\r\n\r\n/**\r\n * 删除待办\r\n * @param {String} id\r\n */\r\nexport function ApiDeleteTodo(id) {\r\n  return service.delete(\"/api/todo/deleteTodo\", id);\r\n}\r\n\r\n/**\r\n * 删除待办-回收站\r\n * @param {String} id\r\n */\r\nexport function ApiDeleteTodoToRecycle(id) {\r\n  return service.delete(\"/api/todo/deleteTodoToRecycle\", id);\r\n}\r\n\r\n/**\r\n * 还原待办-回收站\r\n * @param {String} id\r\n */\r\nexport function ApiRestoreTodoFromRecycle(id) {\r\n  return service.put(\"/api/todo/rebackTodoToRecycle\", id);\r\n}\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"addBtn\":\"index-module_addBtn_1b5wB\"};","import Vue from \"vue\";\r\nimport { ApiGetTodoList, ApiDeleteTodoToRecycle } from \"@/api/todo\";\r\nimport styles from \"./index.module.less\";\r\n\r\nexport default Vue.extend({\r\n  name: \"Todo\",\r\n  data() {\r\n    return {\r\n      currentPage: 1,\r\n      pageSize: 10,\r\n      total: 0,\r\n      todoList: [],\r\n      loading: false\r\n    };\r\n  },\r\n  methods: {\r\n    async getTodoList(page = 1, pageSize = 10) {\r\n      if (this.loading) return;\r\n      this.loading = true;\r\n      this.currentPage = page;\r\n      this.pageSize = pageSize;\r\n      const data = {\r\n        page,\r\n        pageSize\r\n      };\r\n      const resp = await ApiGetTodoList(data);\r\n      this.loading = false;\r\n      if (resp.code === 0) {\r\n        const { list, pagination } = resp.result;\r\n        const { total } = pagination;\r\n        this.todoList = list;\r\n        this.total = total;\r\n      }\r\n    },\r\n    handleCheck(item) {\r\n      const { id, isFinished } = item;\r\n      this.todoList = this.todoList.filter(todo => todo.id !== id);\r\n      if (isFinished) {\r\n        this.todoList.push(item);\r\n      } else {\r\n        this.todoList.unshift(item);\r\n      }\r\n    },\r\n    handleGoDetail(item) {\r\n      this.$router.push({\r\n        name: \"TodoDetail\",\r\n        query: {\r\n          id: item.id\r\n        }\r\n      });\r\n    },\r\n    async handleDelete(item) {\r\n      const { id } = item;\r\n      const resp = await ApiDeleteTodoToRecycle(id);\r\n      if (resp.code === 0) {\r\n        this.$toast.success(\"删除成功\");\r\n        this.todoList = this.todoList.filter(todo => todo.id !== id);\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    this.getTodoList();\r\n  },\r\n  render() {\r\n    const { todoList, loading } = this.$data;\r\n\r\n    return (\r\n      <EContainer>\r\n        <EHeader\r\n          title={this.$route.meta.title}\r\n          type=\"menu\"\r\n          extra={\r\n            <router-link\r\n              to={{\r\n                name: \"TodoDetail\"\r\n              }}\r\n            >\r\n              <van-button plain type=\"info\" class={styles.addBtn}>\r\n                新增\r\n              </van-button>\r\n            </router-link>\r\n          }\r\n        />\r\n        <EAside />\r\n        <EContent>\r\n          <ETodoCard\r\n            loading={loading}\r\n            todoList={todoList}\r\n            onCheck={this.handleCheck}\r\n            onGoDetail={this.handleGoDetail}\r\n            onDel={this.handleDelete}\r\n          />\r\n        </EContent>\r\n        <EFooter />\r\n      </EContainer>\r\n    );\r\n  }\r\n});\r\n"],"sourceRoot":""}