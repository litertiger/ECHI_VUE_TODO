(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["TodoDetail"],{4585:function(t,e,n){t.exports={todoDetail:"index-module_todoDetail_3Pv6Z",saveBtn:"index-module_saveBtn_3uifg",todoDetailContent:"index-module_todoDetailContent_19ElI",todoDetailHeader:"index-module_todoDetailHeader_3T4SK",todoDetailHeaderItem:"index-module_todoDetailHeaderItem_1A7qb",todoDetailTitle:"index-module_todoDetailTitle_3Dkca",finished:"index-module_finished_2LOol",todoDetailCheck:"index-module_todoDetailCheck_2_5WC",icon:"index-module_icon_1M2mh",todoDetailInput:"index-module_todoDetailInput_QFrdb",textarea:"index-module_textarea_3LyXP",todoDetailClaim:"index-module_todoDetailClaim_2X9ky"}},"59a9":function(t,e,n){"use strict";n.d(e,"j",(function(){return a})),n.d(e,"g",(function(){return o})),n.d(e,"f",(function(){return d})),n.d(e,"h",(function(){return r})),n.d(e,"e",(function(){return s})),n.d(e,"c",(function(){return l})),n.d(e,"d",(function(){return u})),n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return f})),n.d(e,"i",(function(){return h}));var i=n("65b5");function a(t){return i["a"].post("/api/todo/saveTodoList",t)}function o(t){return i["a"].get("/api/todo/getTodoList",t)}function d(t){return i["a"].get("/api/todo/getTodoDetail",{id:t})}function r(t){return i["a"].get("/api/todo/getTodoListByDay",{day:t})}function s(){return i["a"].get("/api/todo/getReviewTodoList")}function l(t){return i["a"].get("/api/todo/getFinishedTodoList",t)}function u(t){return i["a"].get("/api/todo/getRecycleTodoList",t)}function c(t){return i["a"].delete("/api/todo/deleteTodo",t)}function f(t){return i["a"].delete("/api/todo/deleteTodoToRecycle",t)}function h(t){return i["a"].put("/api/todo/rebackTodoToRecycle",t)}},"7db0":function(t,e,n){"use strict";var i=n("23e7"),a=n("b727").find,o=n("44d2"),d=n("ae40"),r="find",s=!0,l=d(r);r in[]&&Array(1)[r]((function(){s=!1})),i({target:"Array",proto:!0,forced:s||!l},{find:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),o(r)},9937:function(t,e,n){"use strict";n.r(e);n("a4d3"),n("e01a"),n("7db0"),n("b0c0"),n("ac1f"),n("5319");var i=n("ade3"),a=(n("96cf"),n("1da1")),o=n("4585"),d=n.n(o),r=n("4d26"),s=n.n(r),l=n("59a9");e["default"]={name:"TodoDetail",data:function(){return{id:null,statusVisible:!1,statusData:{},statusOptions:[{name:"低优先级",key:1,color:"#1890ff"},{name:"中优先级",key:2,color:"#52c41a"},{name:"高优先级",key:3,color:"#faad14"},{name:"最高优先级",key:4,color:"#f5222d"}],currentDate:new Date,visibleDate:!1,todoData:{},title:"",description:"",date:+new Date,priority:null}},methods:{getTodoDetail:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var i,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t){n.next=2;break}return n.abrupt("return");case 2:return e.loading=!0,n.next=5,Object(l["f"])(t);case 5:i=n.sent,e.loading=!1,0===i.code&&(a=i.result,e.todoData=a,e.title=a.title,e.description=a.description,e.date=a.date,e.priority=a.priority,e.statusData=e.statusOptions.find((function(t){return t.key===a.priority}))||{});case 8:case"end":return n.stop()}}),n)})))()},handleToggleCheck:function(t){t.isFinished=!t.isFinished},handleOpenDate:function(){this.visibleDate=!0},handleCloseDate:function(){this.visibleDate=!1},handleConfirmDate:function(t){console.log(t),this.date=this.$moment(t),this.handleCloseDate()},handleOpenStatus:function(){this.statusVisible=!0},handleCloseStatus:function(){this.statusVisible=!1},handleSelectStatus:function(t){this.statusData=t,this.priority=t.key,this.handleCloseStatus()},handleSave:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.title){e.next=3;break}return t.$toast("请填写标题~"),e.abrupt("return");case 3:return n={title:t.title,description:t.description,date:t.date,priority:t.priority},t.id&&(n["id"]=t.id),console.log(n),e.next=8,Object(l["j"])(n);case 8:i=e.sent,0===i.code&&(t.$toast.success("提交成功"),setTimeout((function(){t.$router.replace({name:"Todo"})}),1500));case 10:case"end":return e.stop()}}),e)})))()}},mounted:function(){var t=this.$route.query.id;this.id=t,this.getTodoDetail(t)},render:function(){var t=this,e=arguments[0],n=this.$data,a=n.statusVisible,o=n.statusData,r=n.statusOptions,l=n.currentDate,u=n.visibleDate,c=n.todoData,f=n.id,h=n.title,p=n.description,D=n.date;return e("EContainer",{class:s()(d.a.todoDetail)},[e("EHeader",{attrs:{extra:e("van-button",{attrs:{plain:!0,type:"info"},class:d.a.saveBtn,on:{click:this.handleSave}},["保存"])}}),e("EContent",[e("div",{class:d.a.todoDetailContent},[e("div",{class:d.a.todoDetailHeader},[e("div",{class:d.a.todoDetailHeaderItem,on:{click:this.handleOpenStatus}},[e("span",{style:{color:o.color}},[o.name||"优先级"])]),e("div",{class:d.a.todoDetailHeaderItem},[e("div",{class:d.a.todoDetailClaim,on:{click:this.handleOpenDate}},[e("i",{class:s()("iconfont",d.a.icon)},[""]),e("span",[this.$moment(D).calendar(null,{sameElse:"MM-DD HH:mm"})])])])]),e("van-divider"),e("div",{class:s()(d.a.todoDetailTitle,Object(i["a"])({},d.a.finished,c.isFinished))},[f&&e("span",{class:d.a.todoDetailCheck,on:{click:function(){return t.handleToggleCheck(c)}}},[e("i",{class:s()("iconfont",d.a.icon),domProps:{innerHTML:c.isFinished?"&#xe606;":"&#xe6ca;"}})]),e("van-field",{class:s()(d.a.todoDetailInput),attrs:{value:h,placeholder:"标题"},on:{input:function(e){return t.$data.title=e}},style:{paddingLeft:f?"":0}})]),e("van-field",{class:s()(d.a.todoDetailInput,d.a.textarea),attrs:{value:p,showWordLimit:!0,maxlength:"200",type:"textarea",rows:"10",autosize:!0,placeholder:"记录你的美好"},on:{input:function(e){return t.$data.description=e}}})])]),e("van-action-sheet",{attrs:{value:a,actions:r,round:!1},on:{input:this.handleCloseStatus,select:this.handleSelectStatus}}),e("van-popup",{attrs:{value:u,position:"bottom"},on:{input:this.handleCloseDate}},[e("van-datetime-picker",{on:{cancel:this.handleCloseDate,confirm:this.handleConfirmDate},attrs:{value:l,type:"datetime",title:"选择完整时间"}})])])}}}}]);
//# sourceMappingURL=TodoDetail.11b23e78.js.map